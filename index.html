<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¶€ë™ì‚° ë‹¨ì§€ ì°¨íŠ¸ ëŒ€ì‹œë³´ë“œ</title>
    <style>
        :root { --primary-color: #2c3e50; --accent-color: #3498db; --bg-color: #f4f7f6; }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg-color); padding: 20px; margin: 0; }
        header { text-align: center; margin-bottom: 40px; padding: 20px; }
        .search-container { max-width: 600px; margin: 0 auto 30px; display: flex; }
        #searchInput { flex: 1; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto; }
        .apt-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: 0.3s; text-decoration: none; color: inherit; border: 2px solid transparent; text-align: center; }
        .apt-card:hover { transform: translateY(-5px); border-color: var(--accent-color); }
        .tag { display: inline-block; background: #eef2f3; color: #7f8c8d; padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; margin-top: 15px; }
        .error-msg { color: red; text-align: center; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <h1>ğŸ¢ ë¶€ë™ì‚° ë‹¨ì§€ ì°¨íŠ¸ ì €ì¥ì†Œ</h1>
    <p>ì„±ê³µì ì¸ íˆ¬ìë¥¼ ìœ„í•œ ìë³¸ íë¦„ ì¶”ì </p>
</header>

<div class="search-container">
    <input type="text" id="searchInput" placeholder="ë‹¨ì§€ëª… ê²€ìƒ‰..." onkeyup="filterCards()">
</div>

<div class="dashboard-grid" id="aptGrid">
    <p id="statusMsg">ë°ì´í„°ë¥¼ ë¡œë“œí•˜ëŠ” ì¤‘...</p>
</div>

<script>
    // âš ï¸ ì—¬ê¸° ë‘ ì •ë³´ë¥¼ ì •í™•íˆ í™•ì¸í•´ì£¼ì„¸ìš”!
    const USERNAME = "richdadtechtree"; 
    const REPO = "chart"; 
    
    // GitHub API URL (ìºì‹œ ë°©ì§€ë¥¼ ìœ„í•´ timestamp ì¶”ê°€)
    const API_URL = `https://api.github.com/repos/${USERNAME}/${REPO}/contents?t=${new Date().getTime()}`;

    let htmlFiles = [];

    async function fetchRepoFiles() {
        const grid = document.getElementById('aptGrid');
        const statusMsg = document.getElementById('statusMsg');

        try {
            const response = await fetch(API_URL);
            
            if (!response.ok) {
                throw new Error(`ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.status} (ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤)`);
            }

            const files = await response.json();
            
            // íŒŒì¼ í•„í„°ë§: .htmlë¡œ ëë‚˜ê³  index.htmlì´ ì•„ë‹Œ ê²ƒ
            htmlFiles = files.filter(file => 
                file.name.toLowerCase().endsWith('.html') && 
                file.name.toLowerCase() !== 'index.html'
            );

            if (htmlFiles.length === 0) {
                statusMsg.innerHTML = "ì €ì¥ì†Œì— ë“±ë¡ëœ .html íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.";
                return;
            }

            statusMsg.style.display = 'none'; // ë©”ì‹œì§€ ìˆ¨ê¹€
            renderCards(htmlFiles);
        } catch (error) {
            console.error("Error:", error);
            grid.innerHTML = `<p class="error-msg">âš ï¸ ì˜¤ë¥˜ ë°œìƒ: ${error.message}<br>ë ˆí¬ì§€í† ë¦¬ ì´ë¦„ê³¼ ê³µê°œ ì„¤ì •ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.</p>`;
        }
    }

    function renderCards(files) {
        const grid = document.getElementById('aptGrid');
        grid.innerHTML = files.map(file => {
            const displayName = file.name.replace('.html', '');
            // GitHub Pages ê²½ë¡œ ê³ ë ¤: ê°™ì€ í´ë” ë‚´ íŒŒì¼ í˜¸ì¶œ
            return `
                <a href="./${file.name}" class="apt-card">
                    <h3>${displayName}</h3>
                    <span class="tag">ë°ì´í„° ë¶„ì„ ë³´ê¸°</span>
                </a>
            `;
        }).join('');
    }

    function filterCards() {
        const query = document.getElementById('searchInput').value.toUpperCase();
        const filtered = htmlFiles.filter(file => file.name.toUpperCase().includes(query));
        renderCards(filtered);
    }

    fetchRepoFiles();
</script>

</body>
</html>
